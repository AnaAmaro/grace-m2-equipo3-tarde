const collapsibleTriggers=document.querySelectorAll(".js-collapsible__trigger");function updateCollapsible(e){const t=e.currentTarget.parentElement;if(t.classList.contains("js-collapsible--open"))t.classList.remove("js-collapsible--open");else{for(const e of collapsibleTriggers)e.parentElement.classList.remove("js-collapsible--open");t.classList.add("js-collapsible--open")}}for(const e of collapsibleTriggers)e.addEventListener("click",updateCollapsible);function autoPreview(e,t,o){const n=document.querySelector(t),r=document.querySelector(e);r.addEventListener("keyup",function(e){const t=e.currentTarget;r.value?n.innerHTML=t.value:n.innerHTML=o})}autoPreview(".js-input-name",".preview__bio--name","Nombre Apellido"),autoPreview(".js-input-job",".preview__bio--job","Front-end developer");const previewCard=document.querySelector(".js-palettecontainer");function createPaletteSelectorFunction(e){return function(){previewCard.className=`js-card ${e}`}}const selectPalette1=createPaletteSelectorFunction("palette1"),selectPalette2=createPaletteSelectorFunction("palette2"),selectPalette3=createPaletteSelectorFunction("palette3"),ratio1=document.querySelector("#option1").addEventListener("change",selectPalette1),ratio2=document.querySelector("#option2").addEventListener("change",selectPalette2),ratio3=document.querySelector("#option3").addEventListener("change",selectPalette3),previewCardTypo=document.querySelector(".js-typocontainer");function createTypographySelectorFunction(e){return function(){previewCardTypo.className=`js-card ${e}`}}const selectTypography1=createTypographySelectorFunction("typography1"),selectTypography2=createTypographySelectorFunction("typography2"),selectTypography3=createTypographySelectorFunction("typography3"),ratioTypo1=document.querySelector("#option1_typo").addEventListener("change",selectTypography1),ratioTypo2=document.querySelector("#option2_typo").addEventListener("change",selectTypography2),ratioTypo3=document.querySelector("#option3_typo").addEventListener("change",selectTypography3),reset=document.querySelector(".js-sectiona__buton");function resetAutopreview(){const e=document.querySelector(".js-box1_result"),t=document.querySelector(".js-preview__job"),o=document.querySelectorAll(".js-icon-preview");e.innerHTML="Nombre Apellido",t.innerHTML="Front-end developer";for(const e of o)e.style.color="lightgrey";localStorage.removeItem("userData")}function deleteText(){const e=document.querySelector(".js-card__image"),t=document.querySelector(".js-form"),o=document.querySelector(".js-preview");t.reset(),o.src=" ",e.style.backgroundImage="url(../../assets/images/default.jpg)"}reset.addEventListener("click",deleteText),reset.addEventListener("click",resetAutopreview);const browse=document.querySelector(".js-form__photo"),loadFile=function(e){fr.addEventListener("load",loadFileToImages),fr.readAsDataURL(e.target.files[0])};browse.addEventListener("change",loadFile);const loadFileToImages=function(){document.querySelector(".preview").src=fr.result,document.querySelector(".js-card__image").style.backgroundImage=`url(${fr.result})`,saveInfo()},form=document.querySelector("form"),fr=new FileReader,button=document.querySelector(".share__btn"),urlCard=document.querySelector(".created_card_small");function loadPhoto(e){e.preventDefault();let t=document.querySelector(".js-form__photo").files[0];fr.addEventListener("load",sendData),fr.readAsDataURL(t)}function sendData(){let e=getJSONFromInputs(Array.from(form.elements));e.photo=fr.result,sendRequest(e)}function getJSONFromInputs(e){return e.reduce(function(e,t){return"radio"===t.getAttribute("type")?!0===t.checked&&(e[t.name]=t.value):"BUTTON"!==t.nodeName&&(e[t.name]=t.value),e},{})}function showURL(e){if(e.success){urlCard.innerHTML='<h3 class="created_card_h3">La tarjeta ha sido creada:</h3> <a class="created_card_small" target="_blank" href='+e.cardURL+">"+e.cardURL+"</a>",document.querySelector(".js-button-twitter").href=`https://twitter.com/intent/tweet?text=Mira mi tarjeta de visita ${e.cardURL}`}else urlCard.innerHTML="ERROR:"+e.error}function sendRequest(e){fetch("https://us-central1-awesome-cards-cf6f0.cloudfunctions.net/card/",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then(function(e){return e.json()}).then(function(e){showURL(e)}).catch(function(e){console.log(e)})}function changeIconColor(e,t,o){const n=document.querySelector(o),r=document.querySelector(e);document.querySelector(t).addEventListener("keyup",function(){r.value?n.style.color="#114e4e":n.style.color="lightgrey"})}function changeLinkIcon(e,t){const o=document.querySelector(t),n=document.querySelector(e);document.querySelector(e).addEventListener("keyup",function(){n.value.startsWith("http://")||n.value.startsWith("https://")?o.href=n.value:o.href=`http://${n.value}`})}button.addEventListener("click",loadPhoto),changeIconColor(".js-input-phone","#phone",".js-icon-phone"),changeIconColor(".js-input-email","#email",".js-icon-email"),changeIconColor(".js-input-github","#github",".js-icon-github"),changeIconColor(".js-input-linkedin","#linkedin",".js-icon-linkedin"),changeLinkIcon(".js-input-email",".js-icon-link-email"),changeLinkIcon(".js-input-github",".js-icon-link-github"),changeLinkIcon(".js-input-linkedin",".js-icon-link-linkedin");const nameInput=document.querySelector(".js-input-name"),jobInput=document.querySelector(".js-input-job"),photo=document.querySelector(".js-photo"),emailInput=document.querySelector(".js-input-email"),phoneInput=document.querySelector(".js-input-phone"),linkedinInput=document.querySelector(".js-input-linkedin"),githubInput=document.querySelector(".js-input-github"),paletteInput=document.querySelectorAll(".js-palettes"),itemInputs=document.querySelectorAll(".item__input"),typograInputs=document.querySelectorAll(".js-typography"),photoCard=document.querySelector(".js-card__image");function readChoosenPalette(){const e=document.querySelector(".js-palettes:checked");return parseInt(e.value)}function readChoosenTypogra(){const e=document.querySelector(".js-typography:checked");return parseInt(e.value)}function previewLocalStorage(){for(let e=0;e<itemInputs.length;e+=1)itemInputs[e].dispatchEvent(new Event("keyup"))}const formInfo={},saveInfo=()=>{formInfo.palette=readChoosenPalette(),formInfo.name=nameInput.value,formInfo.job=jobInput.value,formInfo.photo=photo.src,formInfo.email=emailInput.value,formInfo.phone=phoneInput.value,formInfo.linkedin=linkedinInput.value,formInfo.github=githubInput.value,formInfo.typogra=readChoosenTypogra(),localStorage.setItem("userData",JSON.stringify(formInfo)),changeButtonColor()},getFromLocalStorage=()=>{const e=JSON.parse(localStorage.getItem("userData"));null!==e&&(paletteInput.value=e.palette,nameInput.value=e.name,jobInput.value=e.job,photo.src=e.photo,!0==!!e.photo?(photoCard.style.backgroundImage=`url(${e.photo})`,photo.style.backgroundImage=`url(${e.photo})`):photoCard.style.backgroundImage='url("../../assets/images/default.jpg")',emailInput.value=e.email,phoneInput.value=e.phone,linkedinInput.value=e.linkedin,githubInput.value=e.github,typograInputs.value=e.typogra)};form.addEventListener("keyup",saveInfo),form.addEventListener("click",saveInfo);const buttonShare=document.querySelector(".share__btn");function changeButtonColor(){nameInput.value&&jobInput.value&&emailInput.value&&linkedinInput.value&&githubInput.value&&photo.src?buttonShare.style.background="#e17334":buttonShare.style.background="lightgrey"}form.addEventListener("keyup",changeButtonColor);const startApp=()=>{!0==!!formInfo&&(getFromLocalStorage(),previewLocalStorage(),changeButtonColor())};1==!!formInfo&&(getFromLocalStorage(),previewLocalStorage(),changeButtonColor());